<div class="most-recent pure-g">
	<div class="game pure-u-1">
		<% most_recent.teams.each_with_index do |team, index| %>
			<% rating, rank = nil, nil %>

			<% if team.players.count > 1 %>
				<% rating = @team_ratings.detect { |r| r.team.id == team.id } %>
				<% rank = @team_ratings.index(rating) %>				
			<% else %>
				<% rating = @player_ratings.detect { |r| r.team.id == team.id } %>
				<% rank = @player_ratings.index(rating) %>
			<% end %>

			<% rhe = most_recent.rating_history_events.detect { |rh| rh.rating.team.id == team.id }%>

			<div class="team <%= 'doubles' if team.players.count > 1 %>">
				<% team.players.each do |player| %>
		  			<div class="player">
			    		<span class="rank"><%= rank + 1 %></span>
			    		<span class="value"><%= rating.value %></span>
			  			<span class="name"><%= player.name %></span>
			  			<%= link_to image_tag(gravatar_url(player, :size => 250)), player_game_path(player, @game) %>
             			<span class="rating"><%= rhe.change > 0 ? "+#{rhe.change}" : rhe.change %></span>
		  			</div>
				<% end %>
			</div>


	  	<% if index == 0 %>
	  		<div class="versus">
	  			<div class="versus-text">versus</div>
	  		</div>
	  	<% end %>
		<% end %>
	</div>
</div>


